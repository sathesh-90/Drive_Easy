{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DriveEasy</title>
  <link rel="stylesheet" href="{% static 'app/css/h_style.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
</head>
<body>
  <header>
    <div class="header-container">
      <!-- Hamburger Menu - Now at leftmost corner -->
      <div id="hamburger" class="hamburger" onclick="toggleSidebar()">
        <div></div>
        <div></div>
        <div></div>
      </div>

      <!-- Logo -->
      <a href="{% url 'index' %}" class="logo">Drive<span>Easy</span></a>

      <!-- Search Bar -->
      <form action="{% url 'cars' %}" method="get" class="search-form">
        <input type="text" name="q" placeholder="Search cars..." class="search-input">
        <button type="submit" class="search-button">
          <i class="fas fa-search"></i>
        </button>
      </form>

      <!-- Top Nav -->
      <nav>
        <ul>
          <li><a href="{% url 'index' %}">Home</a></li>
          <li><a href="{% url 'cars' %}">Cars</a></li>
          <li><a href="{% url 'about' %}">About</a></li>
          <li><a href="#contact">Contact</a></li>
          {% if user.is_authenticated %}
            <li class="user-welcome">Welcome {{ user.username }}</li>
            {% if user.is_superuser %}
            <li><a href="{% url 'admin_dashboard' %}">DashBoard</a></li>
            {% else %}
            <li><a href="{% url 'booked_cars' %}">Booked Cars</a></li>
            <li><a href="{% url 'logout' %}">Logout</a></li>
            {% endif %}
          {% else %}
            <li><a href="{% url 'login' %}">Login</a></li>
            <li><a href="{% url 'register' %}">Register</a></li>
          {% endif %}
        </ul>
      </nav>
    </div>
  </header>

  <div id="sidebar">
    <div class="sidebar-header">
      <h3><i class="fas fa-car"></i> DriveEasy Menu</h3>
    </div>

    <div class="user-section">
      <div class="user-avatar">
        {% if user.is_authenticated %}
          {{ user.username|make_list|first|upper }}
        {% else %}
          <i class="fas fa-user"></i>
        {% endif %}
      </div>
      <div class="user-info">
        <div class="user-name">
          {% if user.is_authenticated %}
            {{ user.username }}
          {% else %}
            Guest User
          {% endif %}
        </div>
        <div class="user-role">
          {% if user.is_authenticated %}
            {% if user.is_staff %}Administrator{% else %}Customer{% endif %}
          {% else %}
            Visitor
          {% endif %}
        </div>
      </div>
      <div class="user-status"></div>
    </div>

    <ul>
      {% if user.is_authenticated %}
        {% if user.is_staff %}
          <li><a href="{% url 'staff_booked_cars' %}"><i class="fas fa-calendar-check"></i> Bookings<span class="menu-badge">{{total_cars_booked}}</span></a></li>
          <li><a href="{% url 'staff_returned_cars_list' %}"><i class="fas fa-undo-alt"></i> Returned Cars <span class="menu-badge">{{r_total_cars_booked}}</span></a></li>
          <li><a href="{% url 'drivers' %}"><i class="fas fa-id-card"></i> Drivers List <span class="menu-badge">{{total_drivers}}</span></a></li>
        {% else %}
          <li><a href="{% url 'cars' %}"><i class="fas fa-calendar-plus"></i> Book a Car</a></li>
          <li><a href="{% url 'booked_cars' %}"><i class="fas fa-car-side"></i> Booked Cars <span class="menu-badge">{{ total_cars_booked }}</span></a></li> 
                    <li><a href="{% url 'return_cars' %}"><i class="fas fa-car-side"></i> Returned Cars <span class="menu-badge">{{ r_total_cars_booked }}</span></a></li>    
   
        {% endif %}
        <li><a href="{% url 'logout' %}"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
      {% else %}
        <li><a href="{% url 'login' %}"><i class="fas fa-sign-in-alt"></i> Login</a></li>
        <li><a href="{% url 'register' %}"><i class="fas fa-user-plus"></i> Register</a></li>
      {% endif %}
      <li><a href="{% url 'cars' %}"><i class="fas fa-search"></i> Browse Cars</a></li>
      <li><a href="{% url 'about' %}"><i class="fas fa-info-circle"></i> About Us</a></li>
  
    </ul>

    <div class="sidebar-footer">
      <p>&copy; 2025 DriveEasy v2.1</p>
    </div>
  </div>

  <!-- Overlay -->
  <div id="overlay" onclick="toggleSidebar()"></div>


 <script src="{% static 'app/js/h.js' %}"></script>
</body>
</html>